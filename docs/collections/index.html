<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <title>Yarn</title>
  <meta name="description" content="Homepage of yarn, static site generator.
">
  <meta name="keywords" content="static site generator, static site, yarn, nodejs, javascript" />

  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="shortcut icon" href="/favicon.ico">

  <link rel="stylesheet" type="text/css" href="/css/main-3deed126cc.css" />
</head>
<body class="post-template">

  <header class="main-header">
    <div class="vertical">
      <div class="main-header-content">
        <h1 class="page-title">
          <a href="/">Yarn</a>
        </h1>
      </div>
    </div>
  </header>

  <main id="content" class="content" role="main">
    

<article class="post">

  <header class="post-header">
    <h1 class="post-title">Collections</h1>
  </header>

  <section class="post-content">
    <p>One of the core concepts of Yarn is the idea of a 'collection'. A collection is how Yarn understands your source files, how it decides what theme templates to apply, and how and where to write the files when building your site.</p>
<p>You configure Collections in your <code>_config.yml</code> file, underneath the <code>collections</code> key. Every key of that object is the name of a collection and its value is an object which configures the collection.</p>
<p>The primary configuration required is to define how a collection decides what files belong within itself. This is defined differently depending on the collection type.</p>
<p>Currently there are three collection types that you can create. Each has a different strategy that is used.</p>
<h2>FileSystemCollection</h2>
<p>This collection fills itself via the file system. Any files that are found within its defined path are added to the collection.</p>
<p>An example file system configuration:</p>
<pre><code class="language-yaml"><span class="hljs-attribute">collections</span>:
  <span class="hljs-attribute">default</span>:
    <span class="hljs-attribute">path</span>: ./
    <span class="hljs-attribute">template</span>: page
</code></pre>
<p>This is a simple configuration that says that all files found within the root of the Yarn site belong in the <code>default</code> FileSystemCollection. When Yarn compiles your site it uses the <code>page.html</code> template file to render the source file.</p>
<p>A FileSystemCollection can also include additional configuration values that allow greater control over the output site. There's enough configuration included that the FileSystemCollection is the collection used when creating a simple blog site.</p>
<p>Here is the example configuration, with explanations for every configuration value found inline.</p>
<pre><code class="language-yaml">collections:
  post:
    # <span class="hljs-keyword">For</span> every <span class="hljs-keyword">file</span> found within `./_posts` they should be tentatively included <span class="hljs-keyword">in</span> this collection, depending <span class="hljs-keyword">on</span> additional configurations.
    path: ./_posts
    # By <span class="hljs-keyword">default</span> every post will <span class="hljs-keyword">use</span> the `post.html` template. This can be over-ridden <span class="hljs-keyword">on</span> a per-<span class="hljs-keyword">file</span> basis <span class="hljs-keyword">if</span> desired <span class="hljs-keyword">in</span> the <span class="hljs-keyword">file</span><span class="hljs-attribute">'s</span> frontmatter.
    template: post
    # This <span class="hljs-keyword">is</span> the URL that every <span class="hljs-keyword">file</span> should have <span class="hljs-keyword">when</span> being built. This takes directly from the frontmatter <span class="hljs-keyword">of</span> the <span class="hljs-keyword">file</span>, making every value <span class="hljs-keyword">in</span> the frontmatter available  <span class="hljs-keyword">for</span> <span class="hljs-keyword">use</span> <span class="hljs-keyword">in</span> the permalink <span class="hljs-keyword">configuration</span> template <span class="hljs-typename">string</span>.
    permalink: /:title/
    # Configure an optional filter <span class="hljs-keyword">to</span> apply <span class="hljs-keyword">when</span> deciding <span class="hljs-keyword">if</span> a <span class="hljs-keyword">file</span> should belong <span class="hljs-keyword">in</span> this collection. Currently there are two types <span class="hljs-keyword">of</span> filters that can be applied, both are shown as an example here.
    filter:
      # This corresponds <span class="hljs-keyword">to</span> the frontmatter metadata found <span class="hljs-keyword">in</span> a <span class="hljs-keyword">file</span>. <span class="hljs-keyword">If</span> the value described here <span class="hljs-keyword">is</span> found <span class="hljs-keyword">to</span> be true <span class="hljs-keyword">then</span> the <span class="hljs-keyword">file</span> <span class="hljs-keyword">is</span> filtered <span class="hljs-keyword">out</span> <span class="hljs-keyword">of</span> the `post` collection. <span class="hljs-keyword">In</span> this <span class="hljs-keyword">case</span> we<span class="hljs-attribute">'re</span> saying that any <span class="hljs-keyword">file</span> which says it <span class="hljs-keyword">is</span> a draft will <span class="hljs-keyword">not</span> be included <span class="hljs-keyword">in</span> this collection.
      metadata:
        draft: true
      # This corresponds <span class="hljs-keyword">to</span> the frontmatter <span class="hljs-keyword">of</span> the <span class="hljs-keyword">file</span> as well. Depending <span class="hljs-keyword">on</span> what key <span class="hljs-keyword">is</span> defined it checks <span class="hljs-keyword">to</span> see <span class="hljs-keyword">if</span> it <span class="hljs-keyword">is</span> a date object, <span class="hljs-keyword">and</span> <span class="hljs-keyword">if</span> it <span class="hljs-keyword">is</span> <span class="hljs-keyword">then</span> it sees <span class="hljs-keyword">if</span> it <span class="hljs-keyword">is</span> a date <span class="hljs-keyword">in</span> the future. <span class="hljs-keyword">If</span> it <span class="hljs-keyword">is</span> a date <span class="hljs-keyword">in</span> the future <span class="hljs-keyword">then</span> it <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> included <span class="hljs-keyword">in</span> the collection.
      future_date:
        key: date
    # Once files have been included <span class="hljs-keyword">in</span> the collection this defines how they should be sorted. The key value corresponds <span class="hljs-keyword">to</span> the frontmatter metadata, so you can choose whatever <span class="hljs-keyword">property</span> you want <span class="hljs-keyword">to</span> dictate how the collection <span class="hljs-keyword">is</span> ordered.
    sort:
      key: date
      order: descending
    # There <span class="hljs-keyword">is</span> also the concept <span class="hljs-keyword">of</span> pagination built into Yarn. <span class="hljs-keyword">If</span> you want <span class="hljs-keyword">to</span> break up the files within this FileSystemCollection you can.
    pagination:
      # Decide what template <span class="hljs-keyword">to</span> <span class="hljs-keyword">use</span> <span class="hljs-keyword">when</span> rendering a pagination page.
      template: index
      # Decide how many files should be included <span class="hljs-keyword">in</span> each pagination page.
      size: <span class="hljs-number">6</span>
      # Decide what the URL should be <span class="hljs-keyword">for</span> the initial pagination page.
      permalink_index: /
      # Decide what the URL should be <span class="hljs-keyword">for</span> every additional pagination page.
      permalink_page:  /page/:page/
</code></pre>
<p>This creates a <code>post</code> collection.</p>
<p>Now you may note that there is overlap between the <code>post</code> collection and the <code>default</code> collection. However every collection is defined so that they are mutually exclusive. What that means is that no matter how many FileSystemCollection's you create they will only contain files that do not exist in other FileSystemCollection's. Under the hood Yarn creates an array of exclude paths which consists of every path that is defined in your <code>_config.yml</code> file. When a FileSystemCollection is deciding if a file should be included it checks if that file exists in one of the other FileSystemCollection path's and if it does then it is excluded.</p>
<h2>Metadata</h2>
<p>This collection is almost identical to a FileSystemCollection collection however its initial source of files is instead derived from the metadata found within every file.</p>
<p>For example to create a tags MetadataCollection:</p>
<pre><code class="language-yaml">collection<span class="hljs-variable">s:</span>
  <span class="hljs-keyword">ta</span><span class="hljs-variable">g:</span>
    metadat<span class="hljs-variable">a:</span> <span class="hljs-keyword">tags</span>
</code></pre>
<p>This creates a <code>tag</code> collection in which every file that has frontmatter that contains a <code>tags</code> key will be included in this collection.</p>
<p>Every other configuration option as the FileSystemCollection is available, except the <code>path</code> key as that has no bearing on a MetadataCollection.</p>
<h2>Static</h2>
<p>This is the simplest type of collection. This collection offers no advanced configuration, as it simply copies its files to the output without any modification.</p>
<p>An example static collection configuration:</p>
<pre><code class="language-yaml">collections:
  images:
    path: ./images
    # Required <span class="hljs-keyword">to</span> describe a collection <span class="hljs-keyword">as</span> <span class="hljs-keyword">static</span>.
    <span class="hljs-keyword">static</span>: <span class="hljs-keyword">true</span>
</code></pre>
<p>This says that for all files found within <code>./imags</code> are to be directly copied over into the built site.</p>
<p>No other configuration options are available as this is simply a straight copy of the files.</p>

  </section>

</article>



    
  </main>

  <footer class="site-footer clearfix">
    <p class="footer-description">
      &copy; Yarn
    </p>
    <p class="footer-published">
      joyfully published by <a href="https://github.com/yarnjs/yarn">yarn</a>
    </p>
  </footer>

  <script type="text/javascript" src="/js/main-479c5e06fa.js"></script>
</body>
</html>
